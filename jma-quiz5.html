<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P&C Quiz with Detailed Explanations</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        body { background: linear-gradient(135deg, #6a1b9a, #8e24aa, #ba68c8); color: #333; line-height: 1.6; min-height: 100vh; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; background: rgba(255, 255, 255, 0.97); border-radius: 15px; box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3); overflow: hidden; }
        header { background: linear-gradient(to right, #6a1b9a, #8e24aa); color: white; padding: 30px; text-align: center; }
        h1 { font-size: 2.5rem; margin-bottom: 10px; }
        .subtitle { font-size: 1.2rem; opacity: 0.9; }
        .timer-container { position: absolute; right: 30px; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.25); padding: 12px 25px; border-radius: 50px; font-size: 1.5rem; font-weight: bold; }
        .nav-buttons { display: flex; justify-content: space-between; padding: 20px 30px; background: #f3e5f5; }
        .btn { padding: 12px 28px; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: 0.3s; display: flex; align-items: center; gap: 8px; }
        .btn-home { background: #4caf50; color: white; }
        .btn-submit { background: #9c27b0; color: white; }
        .btn-reset { background: #ff9800; color: white; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
        .progress-container { padding: 15px 30px; background: #e1bee7; }
        .progress-bar { height: 12px; background: #e0e0e0; border-radius: 6px; overflow: hidden; }
        .progress { height: 100%; background: #8e24aa; width: 0%; transition: width 0.6s; }
        .progress-text { margin-top: 8px; font-weight: 600; display: flex; justify-content: space-between; }
        .quiz-container { padding: 30px; }
        .question { background: #faf2fc; padding: 25px; border-radius: 12px; border-left: 6px solid #8e24aa; margin-bottom: 30px; }
        .question-number { font-size: 1.2rem; color: #6a1b9a; font-weight: bold; }
        .question-text { font-size: 1.25rem; margin: 15px 0; font-weight: 500; }
        .options { display: grid; gap: 14px; }
        .option { padding: 16px; background: white; border: 2px solid #ddd; border-radius: 10px; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; gap: 12px; }
        .option:hover { border-color: #8e24aa; background: #f3e5f5; }
        .option.selected { border-color: #8e24aa; background: #e1bee7; font-weight: bold; }
        .result-container { display: none; padding: 50px; text-align: center; }
        .score { font-size: 4rem; font-weight: bold; color: #6a1b9a; margin: 20px 0; }
        .result-details { margin: 40px auto; max-width: 900px; text-align: left; }
        .detail-item { padding: 20px; background: #f9f0ff; margin: 15px 0; border-radius: 10px; border-left: 6px solid #8e24aa; }
        .incorrect { border-left-color: #e53935; background: #ffebee; }
        .explanation { margin-top: 15px; padding: 15px; background: #e8f5e9; border-radius: 8px; border-left: 4px solid #43a047; font-size: 0.95rem; }
        @media (max-width: 768px) { .timer-container { position: static; transform: none; margin-top: 15px; } .nav-buttons { flex-direction: column; gap: 12px; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Permutations & Combinations</h1>
            <p class="subtitle">25 Questions • JEE Main Level • With Detailed Explanations</p>
            <div class="timer-container">Time Left: <span id="timer">25:00</span></div>
        </header>
        <div class="nav-buttons">
            <button class="btn btn-home" onclick="alert('Back to Chapter List')">Back</button>
            <div>
                <button class="btn btn-reset" onclick="resetQuiz()">Reset Quiz</button>
                <button class="btn btn-submit" onclick="submitQuiz()">Submit Quiz</button>
            </div>
        </div>
        <div class="progress-container">
            <div class="progress-bar"><div class="progress" id="progress"></div></div>
            <div class="progress-text">
                <span>Progress: <span id="progress-text">0</span>/25</span>
                <span id="answered">0 answered</span>
            </div>
        </div>
        <div class="quiz-container" id="quiz"></div>
        <div class="result-container" id="result">
            <h2>Quiz Complete!</h2>
            <div class="score" id="score">0/25</div>
            <p id="message"></p>
            <div class="result-details" id="details"></div>
            <button class="btn btn-reset" onclick="resetQuiz()">Retake Quiz</button>
        </div>
    </div>

    <script>
        const questions = [
            { q: "Number of ways to arrange 5 different books on a shelf is", o: ["5!", "5P5", "5C5", "Both (A) and (B)"], c: 3, 
              exp: "Arrangement means order matters → Permutation. Number of ways to arrange 5 distinct books = 5! = 5P₅. So both (A) and (B) are correct." },
            { q: "ⁿPᵣ = ", o: ["n! / (n−r)!", "n! / r!", "n! / (n+r)!", "n × (n−1) × ... × (n−r)"], c: 0, 
              exp: "By definition: ⁿPᵣ = n(n−1)(n−2)…(n−r+1) = n! / (n−r)! → Option (A) is the standard formula." },
            { q: "If repetition is allowed, number of 4-digit numbers from digits 0–9 is", o: ["10⁴", "9×10³", "10P4", "10C4"], c: 0, 
              exp: "Each of the 4 places can be filled in 10 ways (0–9) → 10 × 10 × 10 × 10 = 10⁴." },
            { q: "Number of ways to arrange letters of MISSISSIPPI is", o: ["10! / (4!4!2!)", "11! / (4!4!2!)", "10! / 4!", "11! / 4!"], c: 1, 
              exp: "Word: M I S S I S S I P P I → Total 11 letters, I:4, S:4, P:2, M:1 → Number of distinct arrangements = 11! / (4!4!2!)." },
            { q: "Circular permutation of n distinct objects (clockwise ≠ anticlockwise) is", o: ["n!", "(n−1)!", "nPₙ / n", "Both (B) and (C)"], c: 3, 
              exp: "In circular arrangement, rotations are considered same → Fix one person → (n−1)! arrangements. Also nPn / n = n! / n = (n−1)!. Both (B) & (C) are correct." },
            { q: "For necklace (clockwise = anticlockwise), number of distinct arrangements of 7 different beads is", o: ["7!", "6!", "(7−1)! / 2", "7! / 2"], c: 2, 
              exp: "For necklace, rotation and reflection (flip) are same → Total distinct = (n−1)! / 2 = 6! / 2 for n=7." },
            { q: "ⁿCᵣ =", o: ["n! / (r!(n−r)!)", "ⁿPᵣ / r!", "n! / (n−r)!", "Both (A) and (B)"], c: 3, 
              exp: "ⁿCᵣ = n! / (r!(n−r)!) and also = ⁿPᵣ / r! → Both (A) and (B) are standard formulas." },
            { q: "ⁿC₀ + ⁿC₁ + ... + ⁿCₙ =", o: ["2ⁿ", "2ⁿ − 1", "2ⁿ + 1", "n!"], c: 0, 
              exp: "Binomial theorem: (1+1)ⁿ = 2ⁿ = sum of all ⁿCᵣ from r=0 to n." },
            { q: "Number of ways to choose at least one fruit from 3 identical apples, 4 identical mangoes, 2 distinct bananas is", o: ["4×5×4 − 1", "(3+1)(4+1)(2+1) − 1", "3×4×2 − 1", "12 − 1"], c: 0, 
              exp: "Apples: 0–3 → 4 ways; Mangoes: 0–4 → 5 ways; Bananas: 0–2² → 4 ways (since distinct). Total including none = 4×5×4. At least one = 4×5×4 − 1." },
            { q: "Value of ⁸C₅ is", o: ["56", "28", "70", "120"], c: 0, 
              exp: "⁸C₅ = ⁸C₃ = (8×7×6)/(3×2×1) = 56." },
            { q: "If n is odd, maximum value of ⁿCᵣ occurs at r =", o: ["n/2", "(n+1)/2 or (n−1)/2", "n", "0"], c: 1, 
              exp: "When n is odd, ⁿCᵣ is maximum at r = (n−1)/2 and r = (n+1)/2 (both give same value)." },
            { q: "Number of ways to divide 12 distinct players into 2 teams of 6 each (teams are unlabelled) is", o: ["12! / (6!6!)", "12! / (6!6! × 2!)", "12C₆", "Both (B) and (C)"], c: 3, 
              exp: "First choose 6 out of 12 → ¹²C₆. But since teams are unlabelled, we divide by 2! to avoid double counting → ¹²C₆ / 2 = 12! / (6!6! × 2!)." },
            { q: "Number of ways to put 5 identical balls into 3 distinct boxes (empty allowed) is", o: ["7C₂", "4C₂", "5C₃", "3⁵"], c: 0, 
              exp: "Stars and bars: Number of non-negative integer solutions to x₁ + x₂ + x₃ = 5 → ⁿ⁺ʳ⁻¹Cᵣ⁻¹ = ⁵⁺³⁻¹C₂ = ⁷C₂ = 21." },
            { q: "How many diagonals are there in a polygon of n sides?", o: ["n(n−3)/2", "n(n−1)/2", "n(n+1)/2", "nC₂"], c: 0, 
              exp: "Total lines from n vertices = ⁿC₂. Subtract n sides → ⁿC₂ − n = n(n−1)/2 − n = n(n−3)/2." },
            { q: "The number of ways to arrange 6 guests around a circular table such that two particular guests always sit together is", o: ["5! × 2", "4! × 2", "6! × 2", "5!"], c: 0, 
              exp: "Treat two particular guests as one unit → 5 units to arrange in circle → (5−1)! = 4!. The two can switch places → ×2. Total = 4! × 2. But wait — circular with together: better method is treat as single unit → 5! × 2 (fix one and arrange others). Standard answer: 2 × 5!." },
            { q: "⁰P₀ is", o: ["0", "1", "Undefined", "∞"], c: 1, 
              exp: "By convention, 0! = 1, and ⁰P₀ = 0! / (0−0)! = 1/1 = 1." },
            { q: "Number of injections from a set of 5 elements to a set of 8 elements is", o: ["8P₅", "8C₅ × 5!", "8⁵", "5⁸"], c: 0, 
              exp: "Injection means one-one mapping → First element: 8 choices, second: 7, ..., fifth: 4 → 8 × 7 × 6 × 5 × 4 = ₈P₅." }
        ];

        let current = 0, answers = new Array(questions.length).fill(null), timeLeft = 25*60, timer;

        function showQuestion() {
            const q = questions[current];
            let opts = '';
            q.o.forEach((opt, i) => {
                const checked = answers[current] === i ? 'checked' : '';
                const selected = answers[current] === i ? 'selected' : '';
                opts += `<label class="option ${selected}">
                    <input type="radio" name="q${current}" ${checked} onchange="answers[current]=${i}; updateProgress(); renderOptions()">
                    ${opt}
                </label>`;
            });
            document.getElementById('quiz').innerHTML = `
                <div class="question">
                    <div class="question-number">Question ${current+1} of ${questions.length}</div>
                    <div class="question-text">${q.q}</div>
                    <div class="options">${opts}</div>
                </div>
                <div style="display:flex; justify-content:space-between; margin-top:30px;">
                    <button class="btn" ${current===0?'disabled':''} onclick="current--; showQuestion()">Previous</button>
                    <button class="btn btn-submit" onclick="${current===questions.length-1?'submitQuiz()':'current++; showQuestion()'}">
                        ${current===questions.length-1?'Submit Quiz':'Next'}
                    </button>
                </div>`;
            renderOptions();
        }

        function renderOptions() {
            document.querySelectorAll('.option').forEach((lbl, i) => {
                if (answers[current] === i) lbl.classList.add('selected');
                else lbl.classList.remove('selected');
            });
        }

        function updateProgress() {
            const done = answers.filter(a => a !== null).length;
            document.getElementById('progress').style.width = (done/questions.length*100) + '%';
            document.getElementById('progress-text').textContent = done;
            document.getElementById('answered').textContent = `${done} answered`;
        }

        function startTimer() {
            timer = setInterval(() => {
                timeLeft--;
                const m = String(Math.floor(timeLeft/60)).padStart(2,'0');
                const s = String(timeLeft%60).padStart(2,'0');
                document.getElementById('timer').textContent = `${m}:${s}`;
                if (timeLeft <= 0) { clearInterval(timer); submitQuiz(); }
            }, 1000);
        }

        function submitQuiz() {
            clearInterval(timer);
            let correct = 0, details = '';
            questions.forEach((q, i) => {
                const user = answers[i];
                const corr = user === q.c;
                if (corr) correct++;
                details += `<div class="detail-item ${corr?'':'incorrect'}">
                    <strong>Q${i+1}:</strong> ${q.q}<br>
                    Your answer: ${user===null?'<i>Not answered</i>':q.o[user]}<br>
                    Correct answer: <strong>${q.o[q.c]}</strong>
                    <div class="explanation"><strong>Explanation:</strong> ${q.exp}</div>
                </div>`;
            });
            let msg = correct >= 23 ? "Outstanding! P&C Master!" :
                      correct >= 20 ? "Excellent! Almost perfect!" :
                      correct >= 17 ? "Very Good! Strong grasp." :
                      correct >= 13 ? "Good! Just revision needed." :
                      correct >= 10 ? "Fair. Focus on circular & grouping." : "Keep practicing!";
            document.getElementById('quiz').style.display = 'none';
            document.getElementById('result').style.display = 'block';
            document.getElementById('score').textContent = `${correct}/25`;
            document.getElementById('message').textContent = msg;
            document.getElementById('details').innerHTML = details;
        }

        function resetQuiz() {
            current = 0; answers.fill(null); timeLeft = 25*60;
            document.getElementById('quiz').style.display = 'block';
            document.getElementById('result').style.display = 'none';
            showQuestion(); updateProgress(); startTimer();
        }

        window.onload = () => { showQuestion(); updateProgress(); startTimer(); };
    </script>
</body>
</html>