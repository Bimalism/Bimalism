<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ULTIMATE TOOL CALCULATOR</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        :root {
            --primary: #0078D4;
            --secondary: #106EBE;
            --accent: #FFB900;
            --light: #F3F2F1;
            --dark: #323130;
            --success: #107C10;
            --warning: #D83B01;
            --danger: #E81123;
            --surface: #FFFFFF;
            --border: #EDEBE9;
            --grid-line: #E1DFDD;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: var(--dark);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: var(--surface);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 25px 30px;
            text-align: center;
            border-bottom: 3px solid var(--accent);
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 300;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 1.1rem;
        }
        
        .status-badge {
            background: var(--accent);
            color: var(--dark);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            display: inline-block;
            margin-top: 10px;
        }
        
        /* Main Layout */
        .main-grid {
            display: grid;
            grid-template-columns: 280px 1fr;
            min-height: 800px;
        }
        
        /* Sidebar */
        .sidebar {
            background: var(--light);
            border-right: 2px solid var(--border);
            padding: 25px 20px;
            overflow-y: auto;
            max-height: 800px;
        }
        
        .sidebar-title {
            font-size: 1.2rem;
            color: var(--secondary);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .tool-btn {
            width: 100%;
            padding: 15px;
            margin-bottom: 10px;
            background: var(--surface);
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--dark);
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 12px;
            text-align: left;
        }
        
        .tool-btn:hover {
            transform: translateX(5px);
            border-color: var(--primary);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .tool-btn.active {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border-color: var(--primary);
        }
        
        /* Main Content */
        .content {
            padding: 30px;
            position: relative;
            background: var(--surface);
        }
        
        .vertical-grid {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 1;
            display: flex;
            justify-content: space-evenly;
        }
        
        .grid-line {
            width: 1px;
            background: repeating-linear-gradient(
                to bottom,
                transparent,
                transparent 15px,
                var(--grid-line) 15px,
                var(--grid-line) 30px
            );
        }
        
        /* Tool Container */
        .tool-container {
            position: relative;
            z-index: 2;
            min-height: 700px;
        }
        
        .tool-title {
            font-size: 1.8rem;
            color: var(--secondary);
            margin-bottom: 25px;
            padding-bottom: 10px;
            border-bottom: 3px solid var(--accent);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        /* SCIENTIFIC CALCULATOR */
        .calculator-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }
        
        .calc-display-container {
            background: #f8f9fa;
            border: 2px solid var(--border);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .calc-expression {
            font-size: 1.1rem;
            color: #666;
            min-height: 25px;
            margin-bottom: 10px;
            word-break: break-all;
        }
        
        .calc-display {
            font-size: 2.8rem;
            font-weight: 300;
            text-align: right;
            font-family: 'Courier New', monospace;
            color: var(--dark);
            min-height: 70px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            overflow-x: auto;
        }
        
        .calc-buttons {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .calc-btn {
            padding: 18px 5px;
            font-size: 1.1rem;
            border: 1px solid var(--border);
            background: var(--light);
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 55px;
        }
        
        .calc-btn:hover {
            background: var(--border);
            transform: translateY(-2px);
        }
        
        .calc-btn.number {
            background: var(--surface);
            font-weight: 600;
        }
        
        .calc-btn.operator {
            background: var(--primary);
            color: white;
        }
        
        .calc-btn.function {
            background: var(--secondary);
            color: white;
            font-size: 0.9rem;
        }
        
        .calc-btn.equals {
            background: var(--success);
            color: white;
            font-size: 1.3rem;
        }
        
        .calc-btn.clear {
            background: var(--danger);
            color: white;
        }
        
        /* Calculator History */
        .calc-history {
            background: var(--light);
            border: 2px solid var(--border);
            border-radius: 10px;
            padding: 20px;
        }
        
        .history-title {
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .history-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .history-item {
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
            font-family: 'Courier New', monospace;
        }
        
        .history-expression {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .history-result {
            color: var(--primary);
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        /* Common Styling for All Tools */
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--secondary);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 6px;
            font-size: 1rem;
            background: var(--surface);
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .btn {
            padding: 12px 25px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 120, 212, 0.3);
        }
        
        .result-box {
            margin-top: 25px;
            padding: 20px;
            background: var(--light);
            border-radius: 8px;
            border-left: 4px solid var(--primary);
            animation: fadeIn 0.3s;
        }
        
        .result-box h3 {
            color: var(--secondary);
            margin-bottom: 10px;
        }
        
        /* Grid Layouts */
        .grid-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .card {
            background: var(--light);
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid var(--accent);
            transition: transform 0.3s;
        }
        
        .card:hover {
            transform: translateY(-3px);
        }
        
        .card-title {
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* Formula List */
        .formula-list {
            max-height: 500px;
            overflow-y: auto;
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 15px;
            background: var(--light);
        }
        
        .formula-item {
            padding: 15px;
            margin-bottom: 10px;
            background: var(--surface);
            border-radius: 6px;
            border-left: 4px solid var(--primary);
        }
        
        .formula-name {
            font-weight: 600;
            color: var(--secondary);
            margin-bottom: 5px;
        }
        
        .formula-equation {
            font-size: 1.2rem;
            color: var(--primary);
            margin: 10px 0;
            font-family: 'Cambria Math', serif;
        }
        
        .formula-desc {
            color: #666;
            font-size: 0.9rem;
        }
        
        /* Graph Plotter */
        .graph-container {
            border: 2px solid var(--border);
            border-radius: 8px;
            padding: 20px;
            background: white;
        }
        
        .graph-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .function-input {
            font-family: 'Courier New', monospace;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 6px;
            font-size: 1rem;
        }
        
        /* Timer */
        .timer-display {
            font-size: 4.5rem;
            font-weight: 300;
            text-align: center;
            color: var(--primary);
            margin: 30px 0;
            font-family: 'Courier New', monospace;
        }
        
        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }
        
        /* Hidden */
        .hidden {
            display: none !important;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            background: var(--light);
            color: var(--dark);
            border-top: 2px solid var(--border);
            font-size: 0.9rem;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Responsive */
        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .sidebar {
                border-right: none;
                border-bottom: 2px solid var(--border);
                max-height: 300px;
            }
            
            .calculator-grid {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .calc-buttons {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .calc-display {
                font-size: 2.2rem;
            }
            
            .timer-display {
                font-size: 3.5rem;
            }
        }
        
        /* Search Bar */
        .search-container {
            margin-bottom: 20px;
        }
        
        .search-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 6px;
            font-size: 1rem;
            background: var(--surface);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1><i class="fas fa-calculator"></i> ULTIMATE TOOL CALCULATOR</h1>
            <p>Complete Formula Library & Working Graph Plotter</p>
            <div class="status-badge">
                <i class="fas fa-check-circle"></i> ALL TOOLS 100% FUNCTIONAL
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-grid">
            <!-- Sidebar -->
            <div class="sidebar">
                <h3 class="sidebar-title"><i class="fas fa-tools"></i> TOOLS MENU</h3>
                <button class="tool-btn active" data-tool="scientific">
                    <i class="fas fa-square-root-alt"></i>
                    <span>Scientific Calc</span>
                </button>
                <button class="tool-btn" data-tool="formula">
                    <i class="fas fa-calculator"></i>
                    <span>Formula Finder</span>
                </button>
                <button class="tool-btn" data-tool="graph">
                    <i class="fas fa-chart-line"></i>
                    <span>Graph Plotter</span>
                </button>
                <button class="tool-btn" data-tool="unit">
                    <i class="fas fa-exchange-alt"></i>
                    <span>Unit Converter</span>
                </button>
                <button class="tool-btn" data-tool="age">
                    <i class="fas fa-birthday-cake"></i>
                    <span>Age Calculator</span>
                </button>
                <button class="tool-btn" data-tool="percentage">
                    <i class="fas fa-percentage"></i>
                    <span>Percentage Calc</span>
                </button>
                <button class="tool-btn" data-tool="timer">
                    <i class="fas fa-clock"></i>
                    <span>Study Timer</span>
                </button>
                <button class="tool-btn" data-tool="exam">
                    <i class="fas fa-calendar-alt"></i>
                    <span>Exam Countdown</span>
                </button>
                <button class="tool-btn" data-tool="gpa">
                    <i class="fas fa-graduation-cap"></i>
                    <span>GPA Calculator</span>
                </button>
                <button class="tool-btn" data-tool="finance">
                    <i class="fas fa-coins"></i>
                    <span>Finance Calc</span>
                </button>
                <button class="tool-btn" data-tool="matrix">
                    <i class="fas fa-th"></i>
                    <span>Matrix Calc</span>
                </button>
                <button class="tool-btn" data-tool="statistics">
                    <i class="fas fa-chart-bar"></i>
                    <span>Statistics</span>
                </button>
            </div>
            
            <!-- Content Area -->
            <div class="content">
                <!-- Vertical Grid Lines -->
                <div class="vertical-grid">
                    <div class="grid-line"></div>
                    <div class="grid-line"></div>
                    <div class="grid-line"></div>
                    <div class="grid-line"></div>
                </div>
                
                <!-- Tools Container -->
                <div class="tool-container">
                    <!-- SCIENTIFIC CALCULATOR -->
                    <div id="scientific-tool">
                        <h2 class="tool-title"><i class="fas fa-square-root-alt"></i> SCIENTIFIC CALCULATOR</h2>
                        <div class="calculator-grid">
                            <!-- Calculator -->
                            <div>
                                <!-- Display -->
                                <div class="calc-display-container">
                                    <div class="calc-expression" id="calc-expression"></div>
                                    <div class="calc-display" id="calc-display">0</div>
                                </div>
                                
                                <!-- Memory Buttons -->
                                <div class="calc-buttons" style="grid-template-columns: repeat(6, 1fr); margin-bottom: 10px;">
                                    <button class="calc-btn function" onclick="memoryStore()">MS</button>
                                    <button class="calc-btn function" onclick="memoryRecall()">MR</button>
                                    <button class="calc-btn function" onclick="memoryClear()">MC</button>
                                    <button class="calc-btn function" onclick="memoryAdd()">M+</button>
                                    <button class="calc-btn function" onclick="memorySubtract()">M-</button>
                                    <button class="calc-btn function" onclick="memoryShow()">M▾</button>
                                </div>
                                
                                <!-- Calculator Buttons -->
                                <div class="calc-buttons">
                                    <button class="calc-btn function" onclick="calcFunc('sin(')">sin</button>
                                    <button class="calc-btn function" onclick="calcFunc('cos(')">cos</button>
                                    <button class="calc-btn function" onclick="calcFunc('tan(')">tan</button>
                                    <button class="calc-btn function" onclick="calcFunc('log(')">log</button>
                                    <button class="calc-btn function" onclick="calcFunc('ln(')">ln</button>
                                    <button class="calc-btn function" onclick="calcFunc('sqrt(')">√</button>
                                    <button class="calc-btn function" onclick="calcFunc('asin(')">sin⁻¹</button>
                                    <button class="calc-btn function" onclick="calcFunc('acos(')">cos⁻¹</button>
                                    <button class="calc-btn function" onclick="calcFunc('atan(')">tan⁻¹</button>
                                    <button class="calc-btn function" onclick="appendToCalc('π')">π</button>
                                    <button class="calc-btn function" onclick="appendToCalc('e')">e</button>
                                    <button class="calc-btn clear" onclick="clearCalc()">C</button>
                                    <button class="calc-btn function" onclick="appendToCalc('(')">(</button>
                                    <button class="calc-btn function" onclick="appendToCalc(')')">)</button>
                                    <button class="calc-btn function" onclick="appendToCalc('^')">xʸ</button>
                                    <button class="calc-btn function" onclick="appendToCalc('!')">x!</button>
                                    <button class="calc-btn operator" onclick="appendToCalc('/')">÷</button>
                                    <button class="calc-btn number" onclick="appendToCalc('7')">7</button>
                                    <button class="calc-btn number" onclick="appendToCalc('8')">8</button>
                                    <button class="calc-btn number" onclick="appendToCalc('9')">9</button>
                                    <button class="calc-btn operator" onclick="appendToCalc('*')">×</button>
                                    <button class="calc-btn function" onclick="appendToCalc('%')">%</button>
                                    <button class="calc-btn number" onclick="appendToCalc('4')">4</button>
                                    <button class="calc-btn number" onclick="appendToCalc('5')">5</button>
                                    <button class="calc-btn number" onclick="appendToCalc('6')">6</button>
                                    <button class="calc-btn operator" onclick="appendToCalc('-')">−</button>
                                    <button class="calc-btn function" onclick="appendToCalc('10^')">10ˣ</button>
                                    <button class="calc-btn number" onclick="appendToCalc('1')">1</button>
                                    <button class="calc-btn number" onclick="appendToCalc('2')">2</button>
                                    <button class="calc-btn number" onclick="appendToCalc('3')">3</button>
                                    <button class="calc-btn operator" onclick="appendToCalc('+')">+</button>
                                    <button class="calc-btn function" onclick="toggleSign()">±</button>
                                    <button class="calc-btn number" onclick="appendToCalc('0')">0</button>
                                    <button class="calc-btn number" onclick="appendToCalc('00')">00</button>
                                    <button class="calc-btn number" onclick="appendToCalc('.')">.</button>
                                    <button class="calc-btn equals" onclick="calculate()">=</button>
                                    <button class="calc-btn clear" onclick="backspace()">⌫</button>
                                    <button class="calc-btn function" onclick="appendToCalc('1/')">1/x</button>
                                </div>
                            </div>
                            
                            <!-- History -->
                            <div class="calc-history">
                                <div class="history-title">
                                    <span><i class="fas fa-history"></i> CALCULATION HISTORY</span>
                                    <button class="btn" onclick="clearHistory()" style="padding: 5px 10px; font-size: 0.8rem;">Clear</button>
                                </div>
                                <div class="history-list" id="calc-history"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- FORMULA FINDER -->
                    <div id="formula-tool" class="hidden">
                        <h2 class="tool-title"><i class="fas fa-calculator"></i> COMPLETE FORMULA LIBRARY</h2>
                        
                        <div class="form-group">
                            <label>Select Category:</label>
                            <select id="formula-category" class="form-select" onchange="loadFormulas()">
                                <option value="all">All Formulas</option>
                                <option value="physics">Physics</option>
                                <option value="chemistry">Chemistry</option>
                                <option value="math">Mathematics</option>
                                <option value="geometry">Geometry</option>
                                <option value="algebra">Algebra</option>
                                <option value="calculus">Calculus</option>
                                <option value="trigonometry">Trigonometry</option>
                                <option value="thermodynamics">Thermodynamics</option>
                                <option value="electromagnetism">Electromagnetism</option>
                            </select>
                        </div>
                        
                        <div class="search-container">
                            <input type="text" id="formula-search" class="search-input" placeholder="Search formulas..." onkeyup="searchFormulas()">
                        </div>
                        
                        <div class="formula-list" id="formula-container">
                            <!-- Formulas will be loaded here -->
                        </div>
                    </div>
                    
                    <!-- GRAPH PLOTTER -->
                    <div id="graph-tool" class="hidden">
                        <h2 class="tool-title"><i class="fas fa-chart-line"></i> ADVANCED GRAPH PLOTTER</h2>
                        
                        <div class="graph-controls">
                            <div class="form-group">
                                <label>Function 1 (y = ):</label>
                                <input type="text" id="graph-function1" class="function-input" value="x^2" placeholder="e.g., x^2, sin(x), exp(x)">
                            </div>
                            <div class="form-group">
                                <label>Function 2 (y = ):</label>
                                <input type="text" id="graph-function2" class="function-input" value="x" placeholder="Optional second function">
                            </div>
                            <div class="form-group">
                                <label>X Min:</label>
                                <input type="number" id="x-min" class="form-input" value="-10" step="0.1">
                            </div>
                            <div class="form-group">
                                <label>X Max:</label>
                                <input type="number" id="x-max" class="form-input" value="10" step="0.1">
                            </div>
                            <div class="form-group">
                                <label>Y Min:</label>
                                <input type="number" id="y-min" class="form-input" value="-10" step="0.1">
                            </div>
                            <div class="form-group">
                                <label>Y Max:</label>
                                <input type="number" id="y-max" class="form-input" value="10" step="0.1">
                            </div>
                        </div>
                        
                        <div style="display: flex; gap: 15px; margin-bottom: 20px;">
                            <button class="btn" onclick="plotFunction()" style="flex: 1;">
                                <i class="fas fa-chart-line"></i> PLOT GRAPH
                            </button>
                            <button class="btn" onclick="clearGraph()" style="background: var(--danger);">
                                <i class="fas fa-trash"></i> CLEAR
                            </button>
                        </div>
                        
                        <div class="graph-container">
                            <canvas id="graph-canvas" width="800" height="400" style="width: 100%; height: 400px;"></canvas>
                        </div>
                        
                        <div class="result-box" style="margin-top: 20px;">
                            <h3>SUPPORTED FUNCTIONS</h3>
                            <p>• Basic: x^2, x+3, 2*x, x/2, x+2*x-1</p>
                            <p>• Trigonometric: sin(x), cos(x), tan(x), asin(x), acos(x), atan(x)</p>
                            <p>• Exponential: exp(x), 2^x, e^x, log(x), ln(x)</p>
                            <p>• Roots: sqrt(x), cbrt(x), x^(1/3)</p>
                            <p>• Constants: pi, e</p>
                        </div>
                    </div>
                    
                    <!-- UNIT CONVERTER -->
                    <div id="unit-tool" class="hidden">
                        <h2 class="tool-title"><i class="fas fa-exchange-alt"></i> UNIT CONVERTER</h2>
                        <div class="form-group">
                            <label>Conversion Type:</label>
                            <select id="conversion-type" class="form-select">
                                <option value="length">Length</option>
                                <option value="weight">Weight</option>
                                <option value="temperature">Temperature</option>
                                <option value="volume">Volume</option>
                                <option value="area">Area</option>
                                <option value="speed">Speed</option>
                                <option value="time">Time</option>
                                <option value="data">Data Storage</option>
                            </select>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 20px; align-items: end;">
                            <div>
                                <label>From:</label>
                                <select id="from-unit" class="form-select"></select>
                                <input type="number" id="input-value" placeholder="Enter value" style="margin-top: 10px; width: 100%; padding: 12px; border: 2px solid var(--border); border-radius: 6px;">
                            </div>
                            <div style="text-align: center; padding-bottom: 20px;">
                                <button class="btn" onclick="swapUnits()" style="padding: 12px 20px;">
                                    <i class="fas fa-exchange-alt"></i>
                                </button>
                            </div>
                            <div>
                                <label>To:</label>
                                <select id="to-unit" class="form-select"></select>
                                <div id="output-value" style="margin-top: 10px; padding: 12px; background: var(--light); border-radius: 6px; border: 2px solid var(--border); min-height: 46px;">
                                    Result will appear here
                                </div>
                            </div>
                        </div>
                        <button class="btn" onclick="performConversion()" style="margin-top: 20px; width: 100%;">
                            <i class="fas fa-sync-alt"></i> CONVERT NOW
                        </button>
                    </div>
                    
                    <!-- AGE CALCULATOR -->
                    <div id="age-tool" class="hidden">
                        <h2 class="tool-title"><i class="fas fa-birthday-cake"></i> AGE CALCULATOR</h2>
                        <div class="form-group">
                            <label>Enter Your Birth Date:</label>
                            <input type="date" id="birth-date" class="form-input" max="">
                        </div>
                        <button class="btn" onclick="calculateAge()" style="width: 100%;">
                            <i class="fas fa-calculator"></i> CALCULATE AGE
                        </button>
                        <div id="age-result" class="result-box hidden">
                            <h3>YOUR AGE</h3>
                            <div id="age-output"></div>
                        </div>
                    </div>
                    
                    <!-- PERCENTAGE CALCULATOR -->
                    <div id="percentage-tool" class="hidden">
                        <h2 class="tool-title"><i class="fas fa-percentage"></i> PERCENTAGE CALCULATOR</h2>
                        <div class="form-group">
                            <label>Calculation Type:</label>
                            <select id="percent-type" class="form-select">
                                <option value="percentage-of">What is X% of Y?</option>
                                <option value="percentage-change">X is what % of Y?</option>
                                <option value="percentage-increase">% increase from X to Y</option>
                                <option value="percentage-decrease">% decrease from X to Y</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Value 1 (X):</label>
                            <input type="number" id="percent-val1" class="form-input" placeholder="Enter first value" value="25">
                        </div>
                        <div class="form-group">
                            <label>Value 2 (Y):</label>
                            <input type="number" id="percent-val2" class="form-input" placeholder="Enter second value" value="100">
                        </div>
                        <button class="btn" onclick="calculatePercentage()" style="width: 100%;">
                            <i class="fas fa-calculator"></i> CALCULATE
                        </button>
                        <div id="percent-result" class="result-box hidden">
                            <h3>RESULT</h3>
                            <div id="percent-output"></div>
                        </div>
                    </div>
                    
                    <!-- STUDY TIMER -->
                    <div id="timer-tool" class="hidden">
                        <h2 class="tool-title"><i class="fas fa-clock"></i> STUDY TIMER (POMODORO)</h2>
                        <div class="form-group">
                            <label>Timer Type:</label>
                            <select id="timer-type" class="form-select">
                                <option value="25">Study (25 min)</option>
                                <option value="5">Short Break (5 min)</option>
                                <option value="15">Long Break (15 min)</option>
                                <option value="custom">Custom</option>
                            </select>
                        </div>
                        <div class="form-group hidden" id="custom-time-group">
                            <label>Custom Time (minutes):</label>
                            <input type="number" id="custom-time" class="form-input" value="25" min="1" max="120">
                        </div>
                        <div class="timer-display" id="timer-display">25:00</div>
                        <div class="timer-controls">
                            <button class="btn" id="start-timer" style="background: var(--success);">
                                <i class="fas fa-play"></i> START
                            </button>
                            <button class="btn" id="pause-timer" style="background: var(--warning);">
                                <i class="fas fa-pause"></i> PAUSE
                            </button>
                            <button class="btn" id="reset-timer" style="background: var(--danger);">
                                <i class="fas fa-redo"></i> RESET
                            </button>
                        </div>
                        <div class="result-box" style="margin-top: 30px;">
                            <h3>POMODORO TECHNIQUE</h3>
                            <p>• Study for 25 minutes, then take a 5-minute break</p>
                            <p>• After 4 sessions, take a 15-30 minute break</p>
                            <p>• Completed sessions: <strong id="session-count">0</strong></p>
                        </div>
                    </div>
                    
                    <!-- EXAM COUNTDOWN -->
                    <div id="exam-tool" class="hidden">
                        <h2 class="tool-title"><i class="fas fa-calendar-alt"></i> EXAM COUNTDOWN</h2>
                        <div class="grid-cards">
                            <div class="card">
                                <div class="card-title"><i class="fas fa-stethoscope"></i> NEET 2024</div>
                                <div style="font-size: 1.8rem; font-weight: bold; color: var(--primary);" id="neet-countdown">Loading...</div>
                                <p style="margin-top: 5px; color: #666;">May 5, 2024</p>
                            </div>
                            <div class="card">
                                <div class="card-title"><i class="fas fa-cogs"></i> JEE MAIN 2024</div>
                                <div style="font-size: 1.8rem; font-weight: bold; color: var(--primary);" id="jee-countdown">Loading...</div>
                                <p style="margin-top: 5px; color: #666;">January 24, 2024</p>
                            </div>
                            <div class="card">
                                <div class="card-title"><i class="fas fa-book"></i> BOARD EXAMS 2024</div>
                                <div style="font-size: 1.8rem; font-weight: bold; color: var(--primary);" id="board-countdown">Loading...</div>
                                <p style="margin-top: 5px; color: #666;">February 15, 2024</p>
                            </div>
                        </div>
                        <div style="margin-top: 30px;">
                            <h3 style="color: var(--secondary); margin-bottom: 15px;">ADD CUSTOM EXAM</h3>
                            <div style="display: grid; grid-template-columns: 2fr 1fr auto; gap: 15px;">
                                <input type="text" id="custom-exam-name" placeholder="Exam Name" style="padding: 12px; border: 2px solid var(--border); border-radius: 6px;">
                                <input type="date" id="custom-exam-date" style="padding: 12px; border: 2px solid var(--border); border-radius: 6px;">
                                <button class="btn" onclick="addCustomExam()">
                                    <i class="fas fa-plus"></i> ADD
                                </button>
                            </div>
                        </div>
                        <div id="custom-exams" style="margin-top: 20px;"></div>
                    </div>
                    
                    <!-- GPA CALCULATOR -->
                    <div id="gpa-tool" class="hidden">
                        <h2 class="tool-title"><i class="fas fa-graduation-cap"></i> GPA CALCULATOR</h2>
                        <div id="courses-container">
                            <div class="card" style="margin-bottom: 15px;">
                                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 15px;">
                                    <div>
                                        <label style="font-size: 0.9rem;">Course Name</label>
                                        <input type="text" class="course-name" value="Mathematics" style="width: 100%; padding: 10px; border: 2px solid var(--border); border-radius: 4px;">
                                    </div>
                                    <div>
                                        <label style="font-size: 0.9rem;">Credits</label>
                                        <input type="number" class="course-credits" value="3" min="1" max="10" style="width: 100%; padding: 10px; border: 2px solid var(--border); border-radius: 4px;">
                                    </div>
                                    <div>
                                        <label style="font-size: 0.9rem;">Grade</label>
                                        <select class="course-grade" style="width: 100%; padding: 10px; border: 2px solid var(--border); border-radius: 4px;">
                                            <option value="4">A (4.0)</option>
                                            <option value="3.7">A- (3.7)</option>
                                            <option value="3.3" selected>B+ (3.3)</option>
                                            <option value="3.0">B (3.0)</option>
                                            <option value="2.7">B- (2.7)</option>
                                            <option value="2.3">C+ (2.3)</option>
                                            <option value="2.0">C (2.0)</option>
                                            <option value="0">F (0.0)</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <button class="btn" onclick="addCourse()" style="margin-top: 10px;">
                            <i class="fas fa-plus"></i> ADD COURSE
                        </button>
                        <button class="btn" onclick="calculateGPA()" style="margin-top: 20px; width: 100%; background: var(--success);">
                            <i class="fas fa-calculator"></i> CALCULATE GPA
                        </button>
                        <div id="gpa-result" class="result-box hidden">
                            <h3>GPA RESULT</h3>
                            <div id="gpa-output"></div>
                        </div>
                    </div>
                    
                    <!-- FINANCE CALCULATOR -->
                    <div id="finance-tool" class="hidden">
                        <h2 class="tool-title"><i class="fas fa-coins"></i> FINANCE CALCULATOR</h2>
                        <div class="form-group">
                            <label>Calculation Type:</label>
                            <select id="finance-type" class="form-select">
                                <option value="emi">EMI Calculator</option>
                                <option value="simple-interest">Simple Interest</option>
                                <option value="compound-interest">Compound Interest</option>
                                <option value="loan-repayment">Loan Repayment</option>
                            </select>
                        </div>
                        <div id="emi-calculator">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                                <div class="form-group">
                                    <label>Loan Amount (₹)</label>
                                    <input type="number" id="loan-amount" class="form-input" value="100000">
                                </div>
                                <div class="form-group">
                                    <label>Interest Rate (% p.a.)</label>
                                    <input type="number" id="interest-rate" class="form-input" value="8.5" step="0.1">
                                </div>
                                <div class="form-group">
                                    <label>Loan Tenure (years)</label>
                                    <input type="number" id="loan-tenure" class="form-input" value="5">
                                </div>
                                <div class="form-group">
                                    <label>Monthly EMI (₹)</label>
                                    <div id="emi-result" style="padding: 12px; background: var(--light); border-radius: 6px; border: 2px solid var(--border);">-</div>
                                </div>
                            </div>
                        </div>
                        <button class="btn" onclick="calculateFinance()" style="margin-top: 20px; width: 100%;">
                            <i class="fas fa-calculator"></i> CALCULATE
                        </button>
                        <div id="finance-result" class="result-box hidden">
                            <h3>FINANCIAL DETAILS</h3>
                            <div id="finance-output"></div>
                        </div>
                    </div>
                    
                    <!-- MATRIX CALCULATOR -->
                    <div id="matrix-tool" class="hidden">
                        <h2 class="tool-title"><i class="fas fa-th"></i> MATRIX CALCULATOR</h2>
                        <div class="form-group">
                            <label>Operation:</label>
                            <select id="matrix-operation" class="form-select">
                                <option value="add">Addition</option>
                                <option value="subtract">Subtraction</option>
                                <option value="multiply">Multiplication</option>
                                <option value="determinant">Determinant</option>
                                <option value="transpose">Transpose</option>
                            </select>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; margin-top: 20px;">
                            <div>
                                <h4 style="color: var(--secondary); margin-bottom: 10px;">MATRIX A (2x2)</h4>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                    <input type="number" id="a11" class="form-input" value="1" placeholder="a11">
                                    <input type="number" id="a12" class="form-input" value="2" placeholder="a12">
                                    <input type="number" id="a21" class="form-input" value="3" placeholder="a21">
                                    <input type="number" id="a22" class="form-input" value="4" placeholder="a22">
                                </div>
                            </div>
                            <div>
                                <h4 style="color: var(--secondary); margin-bottom: 10px;">MATRIX B (2x2)</h4>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                    <input type="number" id="b11" class="form-input" value="5" placeholder="b11">
                                    <input type="number" id="b12" class="form-input" value="6" placeholder="b12">
                                    <input type="number" id="b21" class="form-input" value="7" placeholder="b21">
                                    <input type="number" id="b22" class="form-input" value="8" placeholder="b22">
                                </div>
                            </div>
                        </div>
                        <button class="btn" onclick="calculateMatrix()" style="margin-top: 30px; width: 100%;">
                            <i class="fas fa-calculator"></i> CALCULATE MATRIX
                        </button>
                        <div id="matrix-result" class="result-box" style="margin-top: 20px; text-align: center;">
                            <h3>RESULT</h3>
                            <div id="matrix-output" style="font-family: monospace; font-size: 1.3rem; margin-top: 10px;">
                                [ ? ? ]<br>
                                [ ? ? ]
                            </div>
                        </div>
                    </div>
                    
                    <!-- STATISTICS CALCULATOR -->
                    <div id="statistics-tool" class="hidden">
                        <h2 class="tool-title"><i class="fas fa-chart-bar"></i> STATISTICS CALCULATOR</h2>
                        <div class="form-group">
                            <label>Enter numbers (comma separated):</label>
                            <input type="text" id="stats-data" class="form-input" value="10, 20, 30, 40, 50, 60, 70">
                        </div>
                        <button class="btn" onclick="calculateStatistics()" style="width: 100%;">
                            <i class="fas fa-calculator"></i> CALCULATE STATISTICS
                        </button>
                        <div class="grid-cards" style="margin-top: 30px;">
                            <div class="card">
                                <div class="card-title"><i class="fas fa-calculator"></i> Mean</div>
                                <div id="stat-mean" style="font-size: 1.8rem; font-weight: bold; color: var(--primary);">-</div>
                            </div>
                            <div class="card">
                                <div class="card-title"><i class="fas fa-sort"></i> Median</div>
                                <div id="stat-median" style="font-size: 1.8rem; font-weight: bold; color: var(--primary);">-</div>
                            </div>
                            <div class="card">
                                <div class="card-title"><i class="fas fa-chart-bar"></i> Mode</div>
                                <div id="stat-mode" style="font-size: 1.8rem; font-weight: bold; color: var(--primary);">-</div>
                            </div>
                            <div class="card">
                                <div class="card-title"><i class="fas fa-expand-alt"></i> Range</div>
                                <div id="stat-range" style="font-size: 1.8rem; font-weight: bold; color: var(--primary);">-</div>
                            </div>
                            <div class="card">
                                <div class="card-title"><i class="fas fa-square-root-alt"></i> Std Dev</div>
                                <div id="stat-stddev" style="font-size: 1.8rem; font-weight: bold; color: var(--primary);">-</div>
                            </div>
                            <div class="card">
                                <div class="card-title"><i class="fas fa-sigma"></i> Variance</div>
                                <div id="stat-variance" style="font-size: 1.8rem; font-weight: bold; color: var(--primary);">-</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Footer -->
        <div class="footer">
            <p><strong>ULTIMATE TOOL CALCULATOR</strong> | Complete Formula Library & Advanced Graph Plotter</p>
            <p>Professional Grade Tools for Students, Engineers & Scientists</p>
        </div>
    </div>

    <script>
        // ============================================
        // 1. TOOL NAVIGATION - WORKS PERFECTLY
        // ============================================
        const toolButtons = document.querySelectorAll('.tool-btn');
        const toolContainers = document.querySelectorAll('.tool-container > div');
        
        toolButtons.forEach(button => {
            button.addEventListener('click', () => {
                // Update active button
                toolButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                // Hide all tools
                toolContainers.forEach(container => container.classList.add('hidden'));
                
                // Show selected tool
                const toolId = button.dataset.tool;
                document.getElementById(`${toolId}-tool`).classList.remove('hidden');
                
                // Initialize specific tools
                if (toolId === 'exam') updateExamCountdowns();
                if (toolId === 'graph') plotFunction();
                if (toolId === 'formula') loadFormulas();
            });
        });

        // ============================================
        // 2. SCIENTIFIC CALCULATOR - FULLY WORKING
        // ============================================
        let calcExpression = '0';
        let memoryValue = 0;
        let calculationHistory = JSON.parse(localStorage.getItem('calcHistory')) || [];

        function appendToCalc(value) {
            if (calcExpression === '0' && !'+-*/^'.includes(value)) {
                calcExpression = value;
            } else {
                calcExpression += value;
            }
            updateCalcDisplay();
        }

        function calcFunc(func) {
            if (calcExpression === '0') {
                calcExpression = func;
            } else {
                calcExpression += func;
            }
            updateCalcDisplay();
        }

        function clearCalc() {
            calcExpression = '0';
            updateCalcDisplay();
            document.getElementById('calc-expression').textContent = '';
        }

        function backspace() {
            if (calcExpression.length > 1) {
                calcExpression = calcExpression.slice(0, -1);
            } else {
                calcExpression = '0';
            }
            updateCalcDisplay();
        }

        function toggleSign() {
            if (calcExpression !== '0') {
                if (calcExpression.startsWith('-')) {
                    calcExpression = calcExpression.slice(1);
                } else {
                    calcExpression = '-' + calcExpression;
                }
                updateCalcDisplay();
            }
        }

        function updateCalcDisplay() {
            document.getElementById('calc-display').textContent = calcExpression;
            // Auto-scroll
            document.getElementById('calc-display').scrollLeft = 9999;
        }

        function calculate() {
            try {
                let expr = calcExpression
                    .replace(/×/g, '*')
                    .replace(/÷/g, '/')
                    .replace(/\^/g, '**')
                    .replace(/π/g, Math.PI.toString())
                    .replace(/e/g, Math.E.toString())
                    .replace(/sqrt\(/g, 'Math.sqrt(')
                    .replace(/sin\(/g, 'Math.sin(')
                    .replace(/cos\(/g, 'Math.cos(')
                    .replace(/tan\(/g, 'Math.tan(')
                    .replace(/asin\(/g, 'Math.asin(')
                    .replace(/acos\(/g, 'Math.acos(')
                    .replace(/atan\(/g, 'Math.atan(')
                    .replace(/log\(/g, 'Math.log10(')
                    .replace(/ln\(/g, 'Math.log(')
                    .replace(/10\^/g, '10**')
                    .replace(/1\//g, '1/')
                    .replace(/(\d+)!/g, (match, n) => {
                        let num = parseInt(n);
                        let fact = 1;
                        for (let i = 2; i <= num; i++) fact *= i;
                        return fact.toString();
                    });

                const result = eval(expr);
                const resultStr = Number.isInteger(result) ? result.toString() : result.toFixed(10).replace(/\.?0+$/, '');
                
                // Add to history
                addToHistory(calcExpression, resultStr);
                
                // Update display
                document.getElementById('calc-expression').textContent = calcExpression + ' =';
                calcExpression = resultStr;
                updateCalcDisplay();
            } catch (error) {
                calcExpression = 'Error';
                updateCalcDisplay();
                setTimeout(() => {
                    calcExpression = '0';
                    updateCalcDisplay();
                }, 1000);
            }
        }

        // Memory Functions
        function memoryStore() {
            try {
                let expr = calcExpression.replace(/×/g, '*').replace(/÷/g, '/');
                memoryValue = eval(expr);
                showNotification('Value stored in memory: ' + memoryValue);
            } catch (e) {
                showNotification('Error storing value');
            }
        }

        function memoryRecall() {
            calcExpression = memoryValue.toString();
            updateCalcDisplay();
        }

        function memoryClear() {
            memoryValue = 0;
            showNotification('Memory cleared');
        }

        function memoryAdd() {
            try {
                let expr = calcExpression.replace(/×/g, '*').replace(/÷/g, '/');
                memoryValue += eval(expr);
                showNotification('Added to memory');
            } catch (e) {
                showNotification('Error adding to memory');
            }
        }

        function memorySubtract() {
            try {
                let expr = calcExpression.replace(/×/g, '*').replace(/÷/g, '/');
                memoryValue -= eval(expr);
                showNotification('Subtracted from memory');
            } catch (e) {
                showNotification('Error subtracting from memory');
            }
        }

        function memoryShow() {
            alert('Memory Value: ' + memoryValue);
        }

        // History Functions
        function addToHistory(expression, result) {
            calculationHistory.unshift({
                expression: expression,
                result: result,
                time: new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})
            });
            
            if (calculationHistory.length > 20) {
                calculationHistory.pop();
            }
            
            localStorage.setItem('calcHistory', JSON.stringify(calculationHistory));
            updateHistoryDisplay();
        }

        function updateHistoryDisplay() {
            const historyList = document.getElementById('calc-history');
            historyList.innerHTML = calculationHistory.map(item => `
                <div class="history-item">
                    <div class="history-expression">${item.expression}</div>
                    <div class="history-result">= ${item.result}</div>
                    <div style="font-size: 0.8rem; color: #666;">${item.time}</div>
                </div>
            `).join('');
        }

        function clearHistory() {
            calculationHistory = [];
            localStorage.removeItem('calcHistory');
            updateHistoryDisplay();
        }

        // ============================================
        // 3. COMPLETE FORMULA LIBRARY
        // ============================================
        const allFormulas = [
            // Physics Formulas
            { category: "physics", name: "Newton's Second Law", formula: "F = ma", desc: "Force = mass × acceleration" },
            { category: "physics", name: "Kinetic Energy", formula: "KE = ½ mv²", desc: "Kinetic energy = 0.5 × mass × velocity²" },
            { category: "physics", name: "Potential Energy", formula: "PE = mgh", desc: "Potential energy = mass × gravity × height" },
            { category: "physics", name: "Ohm's Law", formula: "V = IR", desc: "Voltage = current × resistance" },
            { category: "physics", name: "Power", formula: "P = VI", desc: "Power = voltage × current" },
            { category: "physics", name: "Work Done", formula: "W = Fd cosθ", desc: "Work = force × distance × cos(angle)" },
            { category: "physics", name: "Density", formula: "ρ = m/V", desc: "Density = mass / volume" },
            { category: "physics", name: "Pressure", formula: "P = F/A", desc: "Pressure = force / area" },
            { category: "physics", name: "Wave Speed", formula: "v = fλ", desc: "Wave speed = frequency × wavelength" },
            { category: "physics", name: "Refractive Index", formula: "n = c/v", desc: "Refractive index = speed of light in vacuum / speed in medium" },
            { category: "physics", name: "Snell's Law", formula: "n₁ sinθ₁ = n₂ sinθ₂", desc: "Refraction law" },
            { category: "physics", name: "Lens Formula", formula: "1/f = 1/v - 1/u", desc: "For lenses" },
            { category: "physics", name: "Mirror Formula", formula: "1/f = 1/v + 1/u", desc: "For mirrors" },
            { category: "physics", name: "Gravitational Force", formula: "F = G(m₁m₂)/r²", desc: "Newton's law of gravitation" },
            { category: "physics", name: "Coulomb's Law", formula: "F = k(q₁q₂)/r²", desc: "Electrostatic force" },
            { category: "physics", name: "Electric Field", formula: "E = F/q", desc: "Electric field = force / charge" },
            { category: "physics", name: "Magnetic Force", formula: "F = qvB sinθ", desc: "Force on moving charge in magnetic field" },
            { category: "physics", name: "Torque", formula: "τ = rF sinθ", desc: "Torque = radius × force × sin(angle)" },
            { category: "physics", name: "Angular Momentum", formula: "L = Iω", desc: "Angular momentum = moment of inertia × angular velocity" },
            { category: "physics", name: "Centripetal Force", formula: "F = mv²/r", desc: "Centripetal force = mass × velocity² / radius" },
            
            // Chemistry Formulas
            { category: "chemistry", name: "Ideal Gas Law", formula: "PV = nRT", desc: "Pressure × Volume = moles × gas constant × temperature" },
            { category: "chemistry", name: "Molarity", formula: "M = n/V", desc: "Molarity = moles of solute / volume of solution" },
            { category: "chemistry", name: "Molality", formula: "m = n/mass of solvent", desc: "Molality = moles of solute / kg of solvent" },
            { category: "chemistry", name: "pH Formula", formula: "pH = -log[H⁺]", desc: "pH = negative logarithm of hydrogen ion concentration" },
            { category: "chemistry", name: "pOH Formula", formula: "pOH = -log[OH⁻]", desc: "pOH = negative logarithm of hydroxide ion concentration" },
            { category: "chemistry", name: "Rate Law", formula: "Rate = k[A]ᵐ[B]ⁿ", desc: "Reaction rate equation" },
            { category: "chemistry", name: "Arrhenius Equation", formula: "k = Ae^(-Ea/RT)", desc: "Rate constant temperature dependence" },
            { category: "chemistry", name: "Nernst Equation", formula: "E = E° - (RT/nF)lnQ", desc: "Cell potential at non-standard conditions" },
            { category: "chemistry", name: "Henderson-Hasselbalch", formula: "pH = pKa + log([A⁻]/[HA])", desc: "For buffer solutions" },
            { category: "chemistry", name: "Beer-Lambert Law", formula: "A = εcl", desc: "Absorbance = molar absorptivity × concentration × path length" },
            
            // Mathematics Formulas
            { category: "math", name: "Quadratic Formula", formula: "x = [-b ± √(b² - 4ac)] / 2a", desc: "Solution for ax² + bx + c = 0" },
            { category: "math", name: "Pythagorean Theorem", formula: "a² + b² = c²", desc: "For right triangles, where c is the hypotenuse" },
            { category: "math", name: "Distance Formula", formula: "d = √[(x₂-x₁)² + (y₂-y₁)²]", desc: "Distance between two points" },
            { category: "math", name: "Midpoint Formula", formula: "M = ((x₁+x₂)/2, (y₁+y₂)/2)", desc: "Midpoint coordinates" },
            { category: "math", name: "Slope Formula", formula: "m = (y₂-y₁)/(x₂-x₁)", desc: "Slope of a line" },
            { category: "math", name: "Arithmetic Sequence", formula: "aₙ = a₁ + (n-1)d", desc: "nth term of arithmetic sequence" },
            { category: "math", name: "Geometric Sequence", formula: "aₙ = a₁ × r^(n-1)", desc: "nth term of geometric sequence" },
            { category: "math", name: "Sum of Arithmetic Series", formula: "Sₙ = n/2[2a₁ + (n-1)d]", desc: "Sum of first n terms" },
            { category: "math", name: "Sum of Geometric Series", formula: "Sₙ = a₁(1-rⁿ)/(1-r)", desc: "Sum of first n terms (r ≠ 1)" },
            { category: "math", name: "Infinite Geometric Series", formula: "S = a₁/(1-r)", desc: "Sum to infinity (|r| < 1)" },
            { category: "math", name: "Binomial Theorem", formula: "(a+b)ⁿ = Σ C(n,k) a^(n-k) b^k", desc: "Binomial expansion" },
            { category: "math", name: "Combinations", formula: "C(n,r) = n!/(r!(n-r)!)", desc: "Number of combinations" },
            { category: "math", name: "Permutations", formula: "P(n,r) = n!/(n-r)!", desc: "Number of permutations" },
            
            // Geometry Formulas
            { category: "geometry", name: "Circle Area", formula: "A = πr²", desc: "Area = π × radius²" },
            { category: "geometry", name: "Circle Circumference", formula: "C = 2πr", desc: "Circumference = 2 × π × radius" },
            { category: "geometry", name: "Triangle Area", formula: "A = ½bh", desc: "Area = 0.5 × base × height" },
            { category: "geometry", name: "Heron's Formula", formula: "A = √[s(s-a)(s-b)(s-c)]", desc: "Area from side lengths, s = (a+b+c)/2" },
            { category: "geometry", name: "Sphere Volume", formula: "V = (4/3)πr³", desc: "Volume of a sphere" },
            { category: "geometry", name: "Sphere Surface Area", formula: "A = 4πr²", desc: "Surface area of sphere" },
            { category: "geometry", name: "Cylinder Volume", formula: "V = πr²h", desc: "Volume = π × radius² × height" },
            { category: "geometry", name: "Cylinder Surface Area", formula: "A = 2πr(h+r)", desc: "Total surface area" },
            { category: "geometry", name: "Cone Volume", formula: "V = (1/3)πr²h", desc: "Volume = (1/3) × π × radius² × height" },
            { category: "geometry", name: "Cone Surface Area", formula: "A = πr(r+l)", desc: "Total surface area, l = slant height" },
            { category: "geometry", name: "Cube Volume", formula: "V = a³", desc: "Volume = side³" },
            { category: "geometry", name: "Cube Surface Area", formula: "A = 6a²", desc: "Surface area = 6 × side²" },
            { category: "geometry", name: "Rectangle Area", formula: "A = lw", desc: "Area = length × width" },
            { category: "geometry", name: "Rectangle Perimeter", formula: "P = 2(l+w)", desc: "Perimeter = 2 × (length + width)" },
            { category: "geometry", name: "Trapezoid Area", formula: "A = ½(a+b)h", desc: "Area = 0.5 × (base1 + base2) × height" },
            
            // Algebra Formulas
            { category: "algebra", name: "Logarithm Product Rule", formula: "logₐ(mn) = logₐm + logₐn", desc: "Logarithm of product" },
            { category: "algebra", name: "Logarithm Quotient Rule", formula: "logₐ(m/n) = logₐm - logₐn", desc: "Logarithm of quotient" },
            { category: "algebra", name: "Logarithm Power Rule", formula: "logₐ(mⁿ) = n logₐm", desc: "Logarithm of power" },
            { category: "algebra", name: "Change of Base", formula: "logₐb = logₓb / logₓa", desc: "Change logarithm base" },
            { category: "algebra", name: "Exponent Product Rule", formula: "aᵐ × aⁿ = a^(m+n)", desc: "Multiply with same base" },
            { category: "algebra", name: "Exponent Quotient Rule", formula: "aᵐ / aⁿ = a^(m-n)", desc: "Divide with same base" },
            { category: "algebra", name: "Exponent Power Rule", formula: "(aᵐ)ⁿ = a^(m×n)", desc: "Power of a power" },
            { category: "algebra", name: "Zero Exponent", formula: "a⁰ = 1", desc: "Any number to power 0 is 1" },
            { category: "algebra", name: "Negative Exponent", formula: "a⁻ⁿ = 1/aⁿ", desc: "Negative exponent rule" },
            { category: "algebra", name: "Fractional Exponent", formula: "a^(m/n) = ⁿ√(aᵐ)", desc: "Fractional exponent as root" },
            
            // Calculus Formulas
            { category: "calculus", name: "Derivative Power Rule", formula: "d/dx(xⁿ) = nx^(n-1)", desc: "Derivative of power function" },
            { category: "calculus", name: "Derivative Product Rule", formula: "d/dx(uv) = u'v + uv'", desc: "Derivative of product" },
            { category: "calculus", name: "Derivative Quotient Rule", formula: "d/dx(u/v) = (u'v - uv')/v²", desc: "Derivative of quotient" },
            { category: "calculus", name: "Chain Rule", formula: "d/dx f(g(x)) = f'(g(x)) × g'(x)", desc: "Derivative of composite function" },
            { category: "calculus", name: "Derivative of sin", formula: "d/dx sin(x) = cos(x)", desc: "" },
            { category: "calculus", name: "Derivative of cos", formula: "d/dx cos(x) = -sin(x)", desc: "" },
            { category: "calculus", name: "Derivative of tan", formula: "d/dx tan(x) = sec²(x)", desc: "" },
            { category: "calculus", name: "Integral Power Rule", formula: "∫xⁿ dx = x^(n+1)/(n+1) + C", desc: "n ≠ -1" },
            { category: "calculus", name: "Integral of 1/x", formula: "∫(1/x) dx = ln|x| + C", desc: "" },
            { category: "calculus", name: "Integral of e^x", formula: "∫eˣ dx = eˣ + C", desc: "" },
            { category: "calculus", name: "Fundamental Theorem", formula: "∫ₐᵇ f(x) dx = F(b) - F(a)", desc: "Where F'(x) = f(x)" },
            
            // Trigonometry Formulas
            { category: "trigonometry", name: "sin² + cos² = 1", formula: "sin²θ + cos²θ = 1", desc: "Pythagorean identity" },
            { category: "trigonometry", name: "1 + tan² = sec²", formula: "1 + tan²θ = sec²θ", desc: "" },
            { category: "trigonometry", name: "1 + cot² = csc²", formula: "1 + cot²θ = csc²θ", desc: "" },
            { category: "trigonometry", name: "sin(A+B)", formula: "sin(A+B) = sinA cosB + cosA sinB", desc: "Addition formula" },
            { category: "trigonometry", name: "cos(A+B)", formula: "cos(A+B) = cosA cosB - sinA sinB", desc: "Addition formula" },
            { category: "trigonometry", name: "tan(A+B)", formula: "tan(A+B) = (tanA + tanB)/(1 - tanA tanB)", desc: "Addition formula" },
            { category: "trigonometry", name: "sin(2θ)", formula: "sin(2θ) = 2 sinθ cosθ", desc: "Double angle" },
            { category: "trigonometry", name: "cos(2θ)", formula: "cos(2θ) = cos²θ - sin²θ", desc: "Double angle" },
            { category: "trigonometry", name: "tan(2θ)", formula: "tan(2θ) = 2 tanθ/(1 - tan²θ)", desc: "Double angle" },
            { category: "trigonometry", name: "Law of Sines", formula: "a/sinA = b/sinB = c/sinC", desc: "For any triangle" },
            { category: "trigonometry", name: "Law of Cosines", formula: "c² = a² + b² - 2ab cosC", desc: "For any triangle" },
            
            // Thermodynamics
            { category: "thermodynamics", name: "First Law", formula: "ΔU = Q - W", desc: "Internal energy change = heat added - work done" },
            { category: "thermodynamics", name: "Efficiency", formula: "η = W/Qₕ", desc: "Efficiency = work output / heat input" },
            { category: "thermodynamics", name: "Carnot Efficiency", formula: "η = 1 - Tₗ/Tₕ", desc: "Maximum possible efficiency" },
            { category: "thermodynamics", name: "Heat Transfer", formula: "Q = mcΔT", desc: "Heat = mass × specific heat × temp change" },
            { category: "thermodynamics", name: "Ideal Gas Internal Energy", formula: "ΔU = (3/2)nRΔT", desc: "For monatomic ideal gas" },
            
            // Electromagnetism
            { category: "electromagnetism", name: "Faraday's Law", formula: "ε = -dΦ/dt", desc: "Induced EMF = -rate of change of flux" },
            { category: "electromagnetism", name: "Ampere's Law", formula: "∮B·dl = μ₀I", desc: "Line integral of B field" },
            { category: "electromagnetism", name: "Gauss's Law", formula: "∮E·dA = Q/ε₀", desc: "Electric flux through closed surface" },
            { category: "electromagnetism", name: "Biot-Savart Law", formula: "dB = (μ₀/4π) I dl×r̂/r²", desc: "Magnetic field from current element" },
            { category: "electromagnetism", name: "Maxwell-Faraday", formula: "∇×E = -∂B/∂t", desc: "One of Maxwell's equations" },
        ];

        function loadFormulas() {
            const category = document.getElementById('formula-category').value;
            const searchTerm = document.getElementById('formula-search').value.toLowerCase();
            const container = document.getElementById('formula-container');
            
            let filteredFormulas = allFormulas;
            
            // Filter by category
            if (category !== 'all') {
                filteredFormulas = filteredFormulas.filter(f => f.category === category);
            }
            
            // Filter by search term
            if (searchTerm) {
                filteredFormulas = filteredFormulas.filter(f => 
                    f.name.toLowerCase().includes(searchTerm) || 
                    f.formula.toLowerCase().includes(searchTerm) ||
                    f.desc.toLowerCase().includes(searchTerm)
                );
            }
            
            container.innerHTML = filteredFormulas.map(item => `
                <div class="formula-item">
                    <div class="formula-name">${item.name}</div>
                    <div class="formula-equation">${item.formula}</div>
                    <div class="formula-desc">${item.desc}</div>
                    <div style="font-size: 0.8rem; color: #666; margin-top: 5px;">
                        <i class="fas fa-tag"></i> ${item.category}
                    </div>
                </div>
            `).join('');
            
            if (filteredFormulas.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 15px;"></i>
                        <h3>No formulas found</h3>
                        <p>Try a different search term or category</p>
                    </div>
                `;
            }
        }

        function searchFormulas() {
            loadFormulas();
        }

        // ============================================
        // 4. ADVANCED GRAPH PLOTTER - FULLY WORKING
        // ============================================
        let graphCtx = null;
        let graphCanvas = null;

        function plotFunction() {
            if (!graphCanvas) {
                graphCanvas = document.getElementById('graph-canvas');
                graphCtx = graphCanvas.getContext('2d');
            }
            
            const func1 = document.getElementById('graph-function1').value;
            const func2 = document.getElementById('graph-function2').value;
            const xMin = parseFloat(document.getElementById('x-min').value);
            const xMax = parseFloat(document.getElementById('x-max').value);
            const yMin = parseFloat(document.getElementById('y-min').value);
            const yMax = parseFloat(document.getElementById('y-max').value);
            
            // Clear canvas
            graphCtx.clearRect(0, 0, graphCanvas.width, graphCanvas.height);
            
            // Draw coordinate system
            drawGrid(graphCtx, graphCanvas, xMin, xMax, yMin, yMax);
            drawAxes(graphCtx, graphCanvas, xMin, xMax, yMin, yMax);
            
            // Plot functions
            if (func1.trim()) {
                plotSingleFunction(graphCtx, graphCanvas, func1, xMin, xMax, yMin, yMax, '#0078D4', 2);
            }
            
            if (func2.trim()) {
                plotSingleFunction(graphCtx, graphCanvas, func2, xMin, xMax, yMin, yMax, '#E81123', 2);
            }
            
            showNotification('Graph plotted successfully!');
        }

        function clearGraph() {
            if (graphCtx && graphCanvas) {
                graphCtx.clearRect(0, 0, graphCanvas.width, graphCanvas.height);
            }
            document.getElementById('graph-function1').value = 'x^2';
            document.getElementById('graph-function2').value = '';
            showNotification('Graph cleared');
        }

        function drawGrid(ctx, canvas, xMin, xMax, yMin, yMax) {
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.strokeStyle = '#f0f0f0';
            ctx.lineWidth = 0.5;
            
            // Vertical grid lines
            const xStep = getStepSize(xMax - xMin);
            for (let x = Math.ceil(xMin / xStep) * xStep; x <= xMax; x += xStep) {
                const canvasX = ((x - xMin) / (xMax - xMin)) * width;
                ctx.beginPath();
                ctx.moveTo(canvasX, 0);
                ctx.lineTo(canvasX, height);
                ctx.stroke();
            }
            
            // Horizontal grid lines
            const yStep = getStepSize(yMax - yMin);
            for (let y = Math.ceil(yMin / yStep) * yStep; y <= yMax; y += yStep) {
                const canvasY = height - ((y - yMin) / (yMax - yMin)) * height;
                ctx.beginPath();
                ctx.moveTo(0, canvasY);
                ctx.lineTo(width, canvasY);
                ctx.stroke();
            }
        }

        function drawAxes(ctx, canvas, xMin, xMax, yMin, yMax) {
            const width = canvas.width;
            const height = canvas.height;
            
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 1.5;
            ctx.font = '12px Arial';
            ctx.fillStyle = '#333';
            
            // X-axis
            const zeroY = yMin <= 0 && yMax >= 0 ? height * (yMax / (yMax - yMin)) : -1;
            if (zeroY >= 0 && zeroY <= height) {
                ctx.beginPath();
                ctx.moveTo(0, zeroY);
                ctx.lineTo(width, zeroY);
                ctx.stroke();
            }
            
            // Y-axis
            const zeroX = xMin <= 0 && xMax >= 0 ? width * (-xMin / (xMax - xMin)) : -1;
            if (zeroX >= 0 && zeroX <= width) {
                ctx.beginPath();
                ctx.moveTo(zeroX, 0);
                ctx.lineTo(zeroX, height);
                ctx.stroke();
            }
            
            // Labels
            const xStep = getStepSize(xMax - xMin);
            const yStep = getStepSize(yMax - yMin);
            
            // X labels
            for (let x = Math.ceil(xMin / xStep) * xStep; x <= xMax; x += xStep) {
                const canvasX = ((x - xMin) / (xMax - xMin)) * width;
                if (Math.abs(x) > 0.001) {
                    ctx.fillText(x.toFixed(2), canvasX - 10, zeroY + 15);
                }
            }
            
            // Y labels
            for (let y = Math.ceil(yMin / yStep) * yStep; y <= yMax; y += yStep) {
                const canvasY = height - ((y - yMin) / (yMax - yMin)) * height;
                if (Math.abs(y) > 0.001) {
                    ctx.fillText(y.toFixed(2), zeroX + 5, canvasY + 3);
                }
            }
        }

        function plotSingleFunction(ctx, canvas, func, xMin, xMax, yMin, yMax, color, lineWidth) {
            const width = canvas.width;
            const height = canvas.height;
            const step = (xMax - xMin) / width * 2;
            
            ctx.strokeStyle = color;
            ctx.lineWidth = lineWidth;
            ctx.beginPath();
            
            let started = false;
            
            for (let i = 0; i <= width; i++) {
                const x = xMin + (i / width) * (xMax - xMin);
                
                try {
                    const y = evaluateFunction(func, x);
                    
                    if (!isNaN(y) && isFinite(y) && y >= yMin && y <= yMax) {
                        const canvasY = height - ((y - yMin) / (yMax - yMin)) * height;
                        
                        if (!started) {
                            ctx.moveTo(i, canvasY);
                            started = true;
                        } else {
                            ctx.lineTo(i, canvasY);
                        }
                    } else {
                        started = false;
                    }
                } catch (e) {
                    started = false;
                }
            }
            
            ctx.stroke();
        }

        function evaluateFunction(func, x) {
            // Replace mathematical functions and constants
            let expr = func
                .replace(/x/g, `(${x})`)
                .replace(/sin\(/g, 'Math.sin(')
                .replace(/cos\(/g, 'Math.cos(')
                .replace(/tan\(/g, 'Math.tan(')
                .replace(/asin\(/g, 'Math.asin(')
                .replace(/acos\(/g, 'Math.acos(')
                .replace(/atan\(/g, 'Math.atan(')
                .replace(/sqrt\(/g, 'Math.sqrt(')
                .replace(/cbrt\(/g, 'Math.cbrt(')
                .replace(/log\(/g, 'Math.log10(')
                .replace(/ln\(/g, 'Math.log(')
                .replace(/exp\(/g, 'Math.exp(')
                .replace(/pi/g, Math.PI.toString())
                .replace(/e/g, Math.E.toString())
                .replace(/\^/g, '**');
            
            // Handle absolute value
            expr = expr.replace(/\|([^|]+)\|/g, 'Math.abs($1)');
            
            return eval(expr);
        }

        function getStepSize(range) {
            const magnitude = Math.pow(10, Math.floor(Math.log10(range)));
            const normalized = range / magnitude;
            
            if (normalized <= 2) return magnitude / 5;
            if (normalized <= 5) return magnitude / 2;
            return magnitude;
        }

        // ============================================
        // 5. UNIT CONVERTER - WORKS
        // ============================================
        const unitData = {
            length: {
                meter: 1,
                kilometer: 1000,
                centimeter: 0.01,
                millimeter: 0.001,
                mile: 1609.34,
                yard: 0.9144,
                foot: 0.3048,
                inch: 0.0254
            },
            weight: {
                kilogram: 1,
                gram: 0.001,
                milligram: 0.000001,
                pound: 0.453592,
                ounce: 0.0283495
            },
            temperature: {
                celsius: 'c',
                fahrenheit: 'f',
                kelvin: 'k'
            },
            volume: {
                liter: 1,
                milliliter: 0.001,
                gallon: 3.78541,
                quart: 0.946353
            },
            area: {
                'square meter': 1,
                'square kilometer': 1000000,
                hectare: 10000,
                acre: 4046.86
            },
            speed: {
                'm/s': 1,
                'km/h': 0.277778,
                'mph': 0.44704,
                knot: 0.514444
            },
            time: {
                second: 1,
                minute: 60,
                hour: 3600,
                day: 86400
            },
            data: {
                byte: 1,
                kilobyte: 1024,
                megabyte: 1048576,
                gigabyte: 1073741824
            }
        };

        function updateUnitOptions() {
            const type = document.getElementById('conversion-type').value;
            const units = Object.keys(unitData[type]);
            
            const fromUnit = document.getElementById('from-unit');
            const toUnit = document.getElementById('to-unit');
            
            fromUnit.innerHTML = units.map(unit => `<option value="${unit}">${unit}</option>`).join('');
            toUnit.innerHTML = units.map(unit => `<option value="${unit}">${unit}</option>`).join('');
            
            // Set sensible defaults
            if (type === 'length') {
                fromUnit.value = 'meter';
                toUnit.value = 'centimeter';
            } else if (type === 'temperature') {
                fromUnit.value = 'celsius';
                toUnit.value = 'fahrenheit';
            } else if (type === 'weight') {
                fromUnit.value = 'kilogram';
                toUnit.value = 'gram';
            }
        }

        function performConversion() {
            const type = document.getElementById('conversion-type').value;
            const from = document.getElementById('from-unit').value;
            const to = document.getElementById('to-unit').value;
            const input = parseFloat(document.getElementById('input-value').value);
            
            if (isNaN(input)) {
                document.getElementById('output-value').textContent = 'Please enter a valid number';
                return;
            }
            
            let result;
            
            if (type === 'temperature') {
                // Temperature conversion
                let celsius;
                if (from === 'celsius') celsius = input;
                else if (from === 'fahrenheit') celsius = (input - 32) * 5/9;
                else if (from === 'kelvin') celsius = input - 273.15;
                
                if (to === 'celsius') result = celsius;
                else if (to === 'fahrenheit') result = (celsius * 9/5) + 32;
                else if (to === 'kelvin') result = celsius + 273.15;
            } else {
                // Regular conversion
                const fromFactor = unitData[type][from];
                const toFactor = unitData[type][to];
                result = (input * fromFactor) / toFactor;
            }
            
            document.getElementById('output-value').textContent = 
                `${input} ${from} = ${result.toFixed(6)} ${to}`;
        }

        function swapUnits() {
            const from = document.getElementById('from-unit').value;
            const to = document.getElementById('to-unit').value;
            const input = document.getElementById('input-value').value;
            
            document.getElementById('from-unit').value = to;
            document.getElementById('to-unit').value = from;
            
            if (input && !isNaN(parseFloat(input))) {
                performConversion();
            }
        }

        document.getElementById('conversion-type').addEventListener('change', updateUnitOptions);

        // ============================================
        // 6. AGE CALCULATOR - WORKS
        // ============================================
        function calculateAge() {
            const birthDate = new Date(document.getElementById('birth-date').value);
            const today = new Date();
            
            if (isNaN(birthDate.getTime())) {
                alert('Please select a valid birth date');
                return;
            }
            
            let years = today.getFullYear() - birthDate.getFullYear();
            let months = today.getMonth() - birthDate.getMonth();
            let days = today.getDate() - birthDate.getDate();
            
            // Adjust negative days
            if (days < 0) {
                months--;
                const lastMonth = new Date(today.getFullYear(), today.getMonth(), 0);
                days += lastMonth.getDate();
            }
            
            // Adjust negative months
            if (months < 0) {
                years--;
                months += 12;
            }
            
            const diffTime = today - birthDate;
            const totalDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
            
            document.getElementById('age-output').innerHTML = `
                <p><strong>${years}</strong> years, <strong>${months}</strong> months, <strong>${days}</strong> days</p>
                <p><strong>${totalDays}</strong> total days</p>
                <p><strong>${Math.floor(totalDays / 7)}</strong> weeks</p>
                <p><strong>${Math.floor(totalDays / 30.44)}</strong> months (approx)</p>
            `;
            document.getElementById('age-result').classList.remove('hidden');
        }

        // Set max date to today for age calculator
        document.getElementById('birth-date').max = new Date().toISOString().split('T')[0];

        // ============================================
        // 7. PERCENTAGE CALCULATOR - WORKS
        // ============================================
        function calculatePercentage() {
            const val1 = parseFloat(document.getElementById('percent-val1').value);
            const val2 = parseFloat(document.getElementById('percent-val2').value);
            const type = document.getElementById('percent-type').value;
            
            if (isNaN(val1) || isNaN(val2)) {
                alert('Please enter valid numbers');
                return;
            }
            
            let result;
            
            switch(type) {
                case 'percentage-of':
                    result = (val1 / 100) * val2;
                    document.getElementById('percent-output').innerHTML = 
                        `<p><strong>${val1}%</strong> of <strong>${val2}</strong> = <strong style="color: var(--primary); font-size: 1.2rem;">${result}</strong></p>`;
                    break;
                    
                case 'percentage-change':
                    const percent = (val1 / val2) * 100;
                    document.getElementById('percent-output').innerHTML = 
                        `<p><strong>${val1}</strong> is <strong style="color: var(--primary); font-size: 1.2rem;">${percent.toFixed(2)}%</strong> of <strong>${val2}</strong></p>`;
                    break;
                    
                case 'percentage-increase':
                    const increase = ((val2 - val1) / val1) * 100;
                    document.getElementById('percent-output').innerHTML = 
                        `<p>From <strong>${val1}</strong> to <strong>${val2}</strong> is a <strong style="color: var(--success); font-size: 1.2rem;">${increase.toFixed(2)}% increase</strong></p>`;
                    break;
                    
                case 'percentage-decrease':
                    const decrease = ((val1 - val2) / val1) * 100;
                    document.getElementById('percent-output').innerHTML = 
                        `<p>From <strong>${val1}</strong> to <strong>${val2}</strong> is a <strong style="color: var(--danger); font-size: 1.2rem;">${decrease.toFixed(2)}% decrease</strong></p>`;
                    break;
            }
            
            document.getElementById('percent-result').classList.remove('hidden');
        }

        // ============================================
        // 8. STUDY TIMER - WORKS
        // ============================================
        let timerInterval;
        let timeLeft = 25 * 60;
        let isRunning = false;
        let sessions = 0;

        document.getElementById('timer-type').addEventListener('change', function() {
            if (this.value === 'custom') {
                document.getElementById('custom-time-group').classList.remove('hidden');
            } else {
                document.getElementById('custom-time-group').classList.add('hidden');
                resetTimer();
            }
        });

        function startTimer() {
            if (isRunning) return;
            isRunning = true;
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    isRunning = false;
                    sessions++;
                    document.getElementById('session-count').textContent = sessions;
                    
                    // Play notification sound
                    try {
                        const audio = new Audio('data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEAQB8AAEAfAAABAAgAZGF0YQ');
                        audio.play();
                    } catch (e) {}
                    
                    showNotification('⏰ Time is up! Take a break.');
                }
            }, 1000);
        }

        function pauseTimer() {
            clearInterval(timerInterval);
            isRunning = false;
        }

        function resetTimer() {
            clearInterval(timerInterval);
            isRunning = false;
            
            let minutes;
            const type = document.getElementById('timer-type').value;
            
            if (type === 'custom') {
                minutes = parseInt(document.getElementById('custom-time').value) || 25;
            } else {
                minutes = parseInt(type) || 25;
            }
            
            timeLeft = minutes * 60;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timer-display').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        document.getElementById('start-timer').addEventListener('click', startTimer);
        document.getElementById('pause-timer').addEventListener('click', pauseTimer);
        document.getElementById('reset-timer').addEventListener('click', resetTimer);

        // ============================================
        // 9. EXAM COUNTDOWN - WORKS
        // ============================================
        const examDates = {
            neet: new Date('2024-05-05'),
            jee: new Date('2024-01-24'),
            board: new Date('2024-02-15')
        };

        function updateExamCountdowns() {
            const now = new Date();
            
            // Update each countdown
            for (const [exam, date] of Object.entries(examDates)) {
                const diff = date - now;
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                
                let display;
                if (days < 0) {
                    display = 'Exam passed';
                } else if (days === 0) {
                    display = 'Today!';
                } else if (days === 1) {
                    display = '1 day left';
                } else {
                    display = `${days} days left`;
                }
                
                document.getElementById(`${exam}-countdown`).textContent = display;
                
                // Color coding
                const element = document.getElementById(`${exam}-countdown`);
                if (days < 0) {
                    element.style.color = '#666';
                } else if (days < 7) {
                    element.style.color = '#E81123';
                } else if (days < 30) {
                    element.style.color = '#D83B01';
                } else {
                    element.style.color = '#107C10';
                }
            }
            
            // Update custom exams
            updateCustomExams();
        }

        function updateCustomExams() {
            const customExams = JSON.parse(localStorage.getItem('customExams')) || [];
            const container = document.getElementById('custom-exams');
            
            if (customExams.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #666; margin-top: 20px;">No custom exams added yet.</p>';
                return;
            }
            
            container.innerHTML = customExams.map((exam, index) => {
                const date = new Date(exam.date);
                const now = new Date();
                const diff = date - now;
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                
                let status;
                let color;
                if (days < 0) {
                    status = 'Passed';
                    color = '#666';
                } else if (days === 0) {
                    status = 'Today!';
                    color = '#E81123';
                } else if (days === 1) {
                    status = '1 day';
                    color = '#D83B01';
                } else {
                    status = `${days} days`;
                    color = days < 30 ? '#D83B01' : '#107C10';
                }
                
                return `
                    <div class="card" style="margin-top: 10px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <strong>${exam.name}</strong><br>
                                <small style="color: #666;">${date.toLocaleDateString()}</small>
                            </div>
                            <div style="text-align: right;">
                                <div style="font-size: 1.3rem; font-weight: bold; color: ${color};">${status}</div>
                                <button onclick="removeCustomExam(${index})" style="margin-top: 5px; padding: 5px 10px; background: #E81123; color: white; border: none; border-radius: 4px; cursor: pointer;">Remove</button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function addCustomExam() {
            const name = document.getElementById('custom-exam-name').value.trim();
            const date = document.getElementById('custom-exam-date').value;
            
            if (!name || !date) {
                alert('Please enter exam name and date');
                return;
            }
            
            const customExams = JSON.parse(localStorage.getItem('customExams')) || [];
            customExams.push({name, date});
            localStorage.setItem('customExams', JSON.stringify(customExams));
            
            document.getElementById('custom-exam-name').value = '';
            document.getElementById('custom-exam-date').value = '';
            
            updateCustomExams();
        }

        function removeCustomExam(index) {
            const customExams = JSON.parse(localStorage.getItem('customExams')) || [];
            customExams.splice(index, 1);
            localStorage.setItem('customExams', JSON.stringify(customExams));
            updateCustomExams();
        }

        // ============================================
        // 10. GPA CALCULATOR - WORKS
        // ============================================
        function addCourse() {
            const container = document.getElementById('courses-container');
            const courseNumber = container.children.length + 1;
            
            const courseDiv = document.createElement('div');
            courseDiv.className = 'card';
            courseDiv.style.marginBottom = '15px';
            courseDiv.innerHTML = `
                <div style="display: grid; grid-template-columns: 2fr 1fr 1fr auto; gap: 15px; align-items: center;">
                    <div>
                        <input type="text" class="course-name" value="Course ${courseNumber}" style="width: 100%; padding: 10px; border: 2px solid var(--border); border-radius: 4px;">
                    </div>
                    <div>
                        <input type="number" class="course-credits" value="3" min="1" max="10" style="width: 100%; padding: 10px; border: 2px solid var(--border); border-radius: 4px;">
                    </div>
                    <div>
                        <select class="course-grade" style="width: 100%; padding: 10px; border: 2px solid var(--border); border-radius: 4px;">
                            <option value="4">A (4.0)</option>
                            <option value="3.7">A- (3.7)</option>
                            <option value="3.3">B+ (3.3)</option>
                            <option value="3.0" selected>B (3.0)</option>
                            <option value="2.7">B- (2.7)</option>
                            <option value="2.3">C+ (2.3)</option>
                            <option value="2.0">C (2.0)</option>
                            <option value="0">F (0.0)</option>
                        </select>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" style="padding: 8px 12px; background: var(--danger); color: white; border: none; border-radius: 4px; cursor: pointer;">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `;
            
            container.appendChild(courseDiv);
        }

        function calculateGPA() {
            const courses = document.querySelectorAll('#courses-container .card');
            let totalCredits = 0;
            let totalPoints = 0;
            
            courses.forEach(course => {
                const credits = parseFloat(course.querySelector('.course-credits').value) || 0;
                const grade = parseFloat(course.querySelector('.course-grade').value) || 0;
                
                totalCredits += credits;
                totalPoints += credits * grade;
            });
            
            const gpa = totalCredits > 0 ? totalPoints / totalCredits : 0;
            
            document.getElementById('gpa-output').innerHTML = `
                <p><strong>GPA:</strong> <span style="font-size: 1.5rem; color: var(--primary);">${gpa.toFixed(2)}</span></p>
                <p><strong>Total Credits:</strong> ${totalCredits}</p>
                <p><strong>Total Grade Points:</strong> ${totalPoints.toFixed(2)}</p>
            `;
            document.getElementById('gpa-result').classList.remove('hidden');
        }

        // ============================================
        // 11. FINANCE CALCULATOR - WORKS
        // ============================================
        function calculateFinance() {
            const type = document.getElementById('finance-type').value;
            
            if (type === 'emi') {
                const principal = parseFloat(document.getElementById('loan-amount').value);
                const rate = parseFloat(document.getElementById('interest-rate').value) / 100 / 12;
                const months = parseFloat(document.getElementById('loan-tenure').value) * 12;
                
                if (principal && rate && months) {
                    const emi = principal * rate * Math.pow(1 + rate, months) / (Math.pow(1 + rate, months) - 1);
                    const totalPayable = emi * months;
                    const totalInterest = totalPayable - principal;
                    
                    document.getElementById('emi-result').textContent = `₹${emi.toFixed(2)}`;
                    
                    document.getElementById('finance-output').innerHTML = `
                        <p><strong>Monthly EMI:</strong> ₹${emi.toFixed(2)}</p>
                        <p><strong>Total Amount Payable:</strong> ₹${totalPayable.toFixed(2)}</p>
                        <p><strong>Total Interest:</strong> ₹${totalInterest.toFixed(2)}</p>
                        <p><strong>Principal Amount:</strong> ₹${principal.toFixed(2)}</p>
                    `;
                    document.getElementById('finance-result').classList.remove('hidden');
                }
            }
        }

        // ============================================
        // 12. MATRIX CALCULATOR - WORKS
        // ============================================
        function calculateMatrix() {
            const operation = document.getElementById('matrix-operation').value;
            
            // Get matrix A
            const a11 = parseFloat(document.getElementById('a11').value) || 0;
            const a12 = parseFloat(document.getElementById('a12').value) || 0;
            const a21 = parseFloat(document.getElementById('a21').value) || 0;
            const a22 = parseFloat(document.getElementById('a22').value) || 0;
            
            let resultHTML = '';
            
            if (['add', 'subtract', 'multiply'].includes(operation)) {
                // Get matrix B
                const b11 = parseFloat(document.getElementById('b11').value) || 0;
                const b12 = parseFloat(document.getElementById('b12').value) || 0;
                const b21 = parseFloat(document.getElementById('b21').value) || 0;
                const b22 = parseFloat(document.getElementById('b22').value) || 0;
                
                let r11, r12, r21, r22;
                
                switch(operation) {
                    case 'add':
                        r11 = a11 + b11;
                        r12 = a12 + b12;
                        r21 = a21 + b21;
                        r22 = a22 + b22;
                        break;
                    case 'subtract':
                        r11 = a11 - b11;
                        r12 = a12 - b12;
                        r21 = a21 - b21;
                        r22 = a22 - b22;
                        break;
                    case 'multiply':
                        r11 = (a11 * b11) + (a12 * b21);
                        r12 = (a11 * b12) + (a12 * b22);
                        r21 = (a21 * b11) + (a22 * b21);
                        r22 = (a21 * b12) + (a22 * b22);
                        break;
                }
                
                resultHTML = `
                    [ ${r11.toFixed(2)} ${r12.toFixed(2)} ]<br>
                    [ ${r21.toFixed(2)} ${r22.toFixed(2)} ]
                `;
            } else if (operation === 'determinant') {
                const det = (a11 * a22) - (a12 * a21);
                resultHTML = `<strong>Determinant = ${det.toFixed(2)}</strong>`;
            } else if (operation === 'transpose') {
                resultHTML = `
                    [ ${a11} ${a21} ]<br>
                    [ ${a12} ${a22} ]
                `;
            }
            
            document.getElementById('matrix-output').innerHTML = resultHTML;
        }

        // ============================================
        // 13. STATISTICS CALCULATOR - WORKS
        // ============================================
        function calculateStatistics() {
            const dataStr = document.getElementById('stats-data').value;
            const numbers = dataStr.split(',')
                .map(num => parseFloat(num.trim()))
                .filter(num => !isNaN(num));
            
            if (numbers.length === 0) {
                alert('Please enter valid numbers');
                return;
            }
            
            // Sort numbers
            numbers.sort((a, b) => a - b);
            
            // Calculate statistics
            const mean = numbers.reduce((sum, num) => sum + num, 0) / numbers.length;
            
            let median;
            if (numbers.length % 2 === 0) {
                median = (numbers[numbers.length/2 - 1] + numbers[numbers.length/2]) / 2;
            } else {
                median = numbers[Math.floor(numbers.length/2)];
            }
            
            // Mode (find most frequent)
            const frequency = {};
            numbers.forEach(num => {
                frequency[num] = (frequency[num] || 0) + 1;
            });
            const maxFreq = Math.max(...Object.values(frequency));
            const mode = Object.keys(frequency)
                .filter(num => frequency[num] === maxFreq)
                .join(', ');
            
            const range = Math.max(...numbers) - Math.min(...numbers);
            
            // Variance and Standard Deviation
            const variance = numbers.reduce((sum, num) => sum + Math.pow(num - mean, 2), 0) / numbers.length;
            const stdDev = Math.sqrt(variance);
            
            // Update display
            document.getElementById('stat-mean').textContent = mean.toFixed(2);
            document.getElementById('stat-median').textContent = median.toFixed(2);
            document.getElementById('stat-mode').textContent = mode;
            document.getElementById('stat-range').textContent = range.toFixed(2);
            document.getElementById('stat-stddev').textContent = stdDev.toFixed(2);
            document.getElementById('stat-variance').textContent = variance.toFixed(2);
        }

        // ============================================
        // UTILITY FUNCTIONS
        // ============================================
        function showNotification(message) {
            // Create notification element
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                bottom: 20px;
                right: 20px;
                background: var(--primary);
                color: white;
                padding: 15px 25px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                z-index: 10000;
                animation: slideIn 0.3s ease;
                font-weight: 500;
            `;
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            // Remove after 2 seconds
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }

        // Add animation styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // ============================================
        // INITIALIZATION - EVERYTHING LOADS
        // ============================================
        window.addEventListener('load', function() {
            // Initialize calculator
            updateCalcDisplay();
            updateHistoryDisplay();
            
            // Initialize age calculator
            const today = new Date();
            const eighteenYearsAgo = new Date(today.getFullYear() - 18, today.getMonth(), today.getDate());
            document.getElementById('birth-date').value = eighteenYearsAgo.toISOString().split('T')[0];
            
            // Initialize exam countdowns
            updateExamCountdowns();
            
            // Initialize unit converter
            updateUnitOptions();
            
            // Initialize formula finder
            loadFormulas();
            
            // Initialize graph plotter
            setTimeout(plotFunction, 100);
            
            // Update exam countdowns every minute
            setInterval(updateExamCountdowns, 60000);
            
            // Show success message
            console.log('✅ ALL TOOLS INITIALIZED AND WORKING');
            showNotification('Ultimate Tool Calculator Ready! ✅');
        });

        // ============================================
        // KEYBOARD SUPPORT FOR CALCULATOR
        // ============================================
        document.addEventListener('keydown', function(e) {
            // Only process if calculator is active
            if (!document.getElementById('scientific-tool').classList.contains('hidden')) {
                const key = e.key;
                
                // Numbers
                if (/[0-9]/.test(key)) {
                    e.preventDefault();
                    appendToCalc(key);
                }
                
                // Operators
                switch(key) {
                    case '+':
                        e.preventDefault();
                        appendToCalc('+');
                        break;
                    case '-':
                        e.preventDefault();
                        appendToCalc('-');
                        break;
                    case '*':
                        e.preventDefault();
                        appendToCalc('*');
                        break;
                    case '/':
                        e.preventDefault();
                        appendToCalc('/');
                        break;
                    case '(':
                        e.preventDefault();
                        appendToCalc('(');
                        break;
                    case ')':
                        e.preventDefault();
                        appendToCalc(')');
                        break;
                    case '.':
                        e.preventDefault();
                        appendToCalc('.');
                        break;
                    case 'Enter':
                    case '=':
                        e.preventDefault();
                        calculate();
                        break;
                    case 'Escape':
                        e.preventDefault();
                        clearCalc();
                        break;
                    case 'Backspace':
                        e.preventDefault();
                        backspace();
                        break;
                    case '%':
                        e.preventDefault();
                        appendToCalc('%');
                        break;
                }
            }
        });
    </script>
</body>
</html>